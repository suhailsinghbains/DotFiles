'use strict';var Me=function(a,b,c){a.timeOfStartCall=(new Date).getTime();var d=c||Ha,e=d.document,f=Na(d);f&&(a.nonce=f);if("help"==a.flow){var h=Pa("document.location.href",d);!a.helpCenterContext&&h&&(a.helpCenterContext=h.substring(0,1200));h=!0;if(b&&JSON&&JSON.stringify){var l=JSON.stringify(b);(h=1200>=l.length)&&(a.psdJson=l)}h||(b={invalidPsd:!0})}b=[a,b,c];d.GOOGLE_FEEDBACK_START_ARGUMENTS=b;c=a.serverUri||"//www.google.com/tools/feedback";if(h=d.GOOGLE_FEEDBACK_START)h.apply(d,b);else{d=c+"/load.js?";
for(var r in a)b=a[r],null!=b&&!Xa(b)&&(d+=encodeURIComponent(r)+"="+encodeURIComponent(b)+"&");a=(e?new Ke(Ie(e)):Eb||(Eb=new Ke)).b.createElement("SCRIPT");f&&a.setAttribute("nonce",f);f=fe(d);pe(a,f);e.body.appendChild(a)}};u("userfeedback.api.startFeedback",Me);var Ne=function(){this.j=this.g=this.f=this.l=this.modelName=this.h=this.b=this.Hd=""};var Oe=chrome.i18n.getMessage("4163185390680253103"),Pe=chrome.i18n.getMessage("492097680647953484"),Qe=chrome.i18n.getMessage("2575016469622936324"),Re=chrome.i18n.getMessage("128276876460319075"),Se=chrome.i18n.getMessage("3326722026796849289"),Te=chrome.i18n.getMessage("1018984561488520517"),Ue=chrome.i18n.getMessage("8205999658352447129"),Ve=chrome.i18n.getMessage("5723583529370342957"),We=chrome.i18n.getMessage("1550904064710828958"),Xe=chrome.i18n.getMessage("5014364904504073524"),Ye=chrome.i18n.getMessage("2194670894476780934"),
Ze=chrome.i18n.getMessage("6614468912728530636"),$e=chrome.i18n.getMessage("5910595154486533449"),af=chrome.i18n.getMessage("5363086287710390513"),bf=chrome.i18n.getMessage("244647017322945605"),cf=chrome.i18n.getMessage("5375576275991472719"),df=chrome.i18n.getMessage("4592127349908255218"),ef=chrome.i18n.getMessage("843316808366399491"),ff=chrome.i18n.getMessage("5699813974548050528"),gf=chrome.i18n.getMessage("8515148417333877999"),hf=chrome.i18n.getMessage("1636686747687494376"),jf=chrome.i18n.getMessage("4148300086676792937"),
kf=chrome.i18n.getMessage("3219866268410307919"),lf=chrome.i18n.getMessage("9211708838274008657"),mf=chrome.i18n.getMessage("8706273405040403641"),nf=chrome.i18n.getMessage("4756056595565370923"),of=chrome.i18n.getMessage("7876724262035435114"),pf=chrome.i18n.getMessage("5485620192329479690"),qf=chrome.i18n.getMessage("6963873398546068901"),rf=chrome.i18n.getMessage("3567591856726172993"),sf=chrome.i18n.getMessage("3239956785410157548");if("undefined"!=typeof angular){var tf=angular.module("chrome_18n",[]);chrome.runtime&&chrome.runtime.getManifest&&chrome.runtime.getManifest().default_locale&&tf.directive("angularMessage",function(){return{restrict:"E",replace:!0,controller:["$scope",function(a){var b=this;this.ii=this.hh=null;a.dirForText=function(a){b.hh||(b.hh=chrome.i18n.getMessage("@@bidi_dir")||"ltr");b.ii||(b.ii=new Le("rtl"==b.hh));var c=b.ii,e,f=e=0,h=!1;a=(a||"").split(Yd);for(var l=0;l<a.length;l++){var r=a[l];Wd.test(r)?
(e++,f++):Xd.test(r)?h=!0:Vd.test(r)?f++:Zd.test(r)&&(h=!0)}e=0==f?h?1:0:.4<e/f?-1:1;return-1==(0==e?c.b:e)?"rtl":"ltr"}}],compile:function(a,b){b=b.key;var c=null,d=document.createElement("amr");b&&!b.match(/^\d+$/)&&(b=chrome.i18n.getMessage(b),null==b&&d.setAttribute("id","missing"));if(b){var e=chrome.i18n.getMessage(b+"_ph");c=[];if(null!=e)for(c=e.split("\ue000"),e=0;e<c.length;++e)c[e]=c[e].replace(/^{{(.*)}}$/,'<amrp dir="{{dirForText($1)}}">{{$1}}</amrp>');c=chrome.i18n.getMessage(b,c)}else d.setAttribute("r",
"nokey");c?d.innerHTML=c:(d.setAttribute("tl","false"),d.innerHTML=a.html());a.replaceWith(d)}}})};var vf=function(a,b){var c=this;this.l=b;this.b=a;this.b.top=a;this.o=[];this.h=!1;this.f=new Ne;this.b.videoSmoothnessRatings=this.Fj(Ye,Te,Ue,Ve,We,Xe);this.b.videoQualityRatings=this.Fj(Ye,Ze,$e,af,bf,cf);this.b.audioQualityRatings=this.Fj(Ye,df,ef,ff,gf,hf);this.o=[{value:"Bug",desc:Oe},{value:"FeatureRequest",desc:Pe},{value:"MirroringQuality",desc:Qe},{value:"Discovery",desc:Re},{value:"Other",desc:Se}];this.b.feedbackTypes=this.o;this.b.includeFineLogs=!0;this.b.feedbackType="Bug";this.b.sendFeedback=
this.br.bind(this);this.b.cancel=this.Ao.bind(this);this.b.attachLogsClick=this.j.bind(this);this.b.viewLogs=this.B.bind(this);this.b.$watchGroup("videoSmoothness videoQuality audioQuality feedbackDescription comments feedbackType".split(" "),this.Co.bind(this));this.b.sufficientFeedback=!1;this.b.$watch("attachLogs",this.j.bind(this));this.b.attachLogs=!0;this.A=Dc();this.b.userEmail="";chrome.identity.getProfileUserInfo(function(a){c.b.userEmail=a.email;uf(c)});this.b.yourAnswerText=sf;this.b.language=
chrome.i18n&&chrome.i18n.getUILanguage?chrome.i18n.getUILanguage():chrome.runtime.getManifest().default_locale;this.b.requestLogsInProgress=!1;this.b.mrVersion=chrome.runtime.getManifest().version};g=vf.prototype;g.Fj=function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(new wf(c,arguments[c]));b.push(new wf(0,arguments[0]));return b};g.Ao=function(){this.b.feedbackDescription&&!confirm(jf)||window.close()};
g.Co=function(){var a=this.b.feedbackType;this.b.sufficientFeedback="MirroringQuality"==a?this.b.videoSmoothness||this.b.videoQuality||this.b.audioQuality||this.b.comments:"Discovery"==a?this.b.visibleInSetup||this.b.comments:!!this.b.feedbackDescription};
g.br=function(){if(this.b.sufficientFeedback){var a=this.b.feedbackType,b="";"MirroringQuality"==a?(this.b.videoSmoothness&&(b+="\nVideo Smoothness: "+this.b.videoSmoothness),this.b.videoQuality&&(b+="\nVideo Quality: "+this.b.videoQuality),this.b.audioQuality&&(b+="\nAudio: "+this.b.audioQuality),this.b.projectedContentUrl&&(b+="\nProjected Content/URL: "+this.b.projectedContentUrl),this.b.comments&&(b+="\nComments: "+this.b.comments)):"Discovery"==a?(this.b.visibleInSetup&&(b+="\nChromecast Visible in Setup: "+
this.b.visibleInSetup),this.b.hasNetworkSoftware&&(b+="\nUsing VPN/proxy/firewall/NAS Software: "+this.b.hasNetworkSoftware),this.b.networkDescription&&(b+="\nNetwork Description: "+this.b.networkDescription),this.b.comments&&(b+="\nComments: "+this.b.comments)):b=this.b.feedbackDescription;a="Type: "+a+"\n\n"+b;this.b.sendDialogText=kf;this.b.okButton=rf;this.b.feedbackSent=!1;this.l.show({locals:{wy:this.b.feedbackSent,Ky:this.b.sendDialogText,Jp:this.b.okButton},scope:this.b,preserveScope:!0,bindToController:!0,
template:'<md-dialog id="feedback-confirmation"><md-dialog-content><div id="send-feedback-text">{{sendDialogText}}</div><md-dialog-actions><md-button class="md-raised md-primary"ng-disabled="!feedbackSent" ng-click="closeWindow()">{{okButton}}</md-button></md-dialog-actions></md-dialog-content></md-dialog>',controller:this.g});this.bm(a,Date.now())}};g.bm=function(a,b){var c=Date.now();!this.b.requestLogsInProgress||5E3<c-b?xf(this,a):setTimeout(this.bm.bind(this),1E3,a,b)};
var xf=function(a,b){var c=0,d=function(c,b,d){d?c(!0):(a.b.sendDialogText=nf,uf(a),b(Error("Failed to send")))},e=chrome.declarativeWebRequest?"MrTeamfood":"MRStable";(new re(function(){c++;return new Promise(function(c,h){var f=a.b.userEmail,r=a.f;c=d.bind(null,c,h);h=chrome.runtime.getManifest();Me({productId:85561,bucket:e,flow:"submit",serverUri:"https://www.google.com/tools/feedback",allowNonLoggedInFeedback:!0,locale:h.default_locale,enableAnonymousFeedback:!f,report:{description:b},callback:c},
{version:h.version,description:h.description,user_email:f||"NA",logs:r.Hd||"NA",external_logs:r.b||"NA",device_model:r.modelName||"NA",receiver_version:r.l||"NA",dash_report_url:r.h||"NA",cast_device_counts:r.f,dial_device_counts:r.g,dialog_type:r.j||"Unknown"})})},1E4,4)).start().then(function(){Ab("MediaRouter.Ui.Action.Feedback");a.b.sendDialogText=mf;a.b.feedbackSent=!0;uf(a)},function(){a.b.sendDialogText=lf;a.b.feedbackSent=!0;uf(a)})};
vf.prototype.j=function(){var a=this;this.f=new Ne;this.b.attachLogs&&(this.b.requestLogsInProgress=!0,chrome.runtime.sendMessage(new Ce(this.A,"retrieve_log_data"),function(b){a.b.requestLogsInProgress=!1;a.f.Hd=b.logs||"no extension";a.f.Hd+="\n";a.f.Hd+=b.mediaSinkServiceStatus||"no media sink service status from browser";b.castStreamingLogs&&(a.f.h=b.castStreamingLogs);b.castDeviceCounts&&(a.f.f=b.castDeviceCounts);b.dialDeviceCounts&&(a.f.g=b.dialDeviceCounts);b.dialogType&&(a.f.j=b.dialogType);
if(b=b.device)if(b.model&&(a.f.modelName=b.model),b.version&&(a.f.l=b.version),!a.h){var c=Dc();a.h=!0;a.f.b=ye(b.ip,c,a.u.bind(a))}}))};
vf.prototype.B=function(){this.b.logs=this.f.Hd;this.b.logsHeader=of;this.b.sendLogs=pf;this.b.fineLogsWarning=qf;this.b.okButton=rf;this.l.show({locals:{sy:this.b.attachLogs,Hd:this.b.logs,Ay:this.b.includeFineLogs,Fy:this.b.logsHeader,Ly:this.b.sendLogs,xy:this.b.fineLogsWarning,Jp:this.b.okButton},scope:this.b,preserveScope:!0,bindToController:!0,clickOutsideToClose:!0,template:'<md-dialog><md-dialog-content id="logs-dialog"><div class="subheading">{{logsHeader}}</div><div ng-show="includeFineLogs && attachLogs"id="feedback-fine-log-warning" class="informative">{{fineLogsWarning}}</div><pre>{{logs}}</pre><div class="send-logs"><md-checkbox type="checkbox" ng-model="attachLogs"ng-change="attachLogsClick()"><span>{{sendLogs}}</span></md-checkbox></div><md-dialog-actions><md-button class="md-raised md-primary"ng-click="closeDialog()">{{okButton}}</md-button></md-dialog-actions></md-dialog-content></md-dialog>',
controller:this.g})};vf.prototype.u=function(a,b){this.h=!1;this.f.b="error"==a?"":b;this.b.attachLogs||(this.f.b="");uf(this)};var uf=function(a){a.b.$$phase||a.b.$apply()};vf.prototype.g=function(a,b){a.closeWindow=function(){window.close()};a.closeDialog=function(){b.hide()}};vf.prototype.g.$inject=["$scope","$mdDialog"];var wf=function(a,b){this.id=a;this.desc=b;this.text=0==a?b:a+" ("+b+")"};
angular.module("feedbackApp","chrome_18n material.components.button material.components.checkbox material.components.dialog material.components.input material.components.radioButton".split(" ")).controller("FeedbackCtrl",["$scope","$mdDialog",vf]);u("ng.safehtml.googSceHelper.isGoogHtmlType",function(a){return a&&a.ue?!0:!1});u("ng.safehtml.googSceHelper.isCOMPILED",function(){return!0});u("ng.safehtml.googSceHelper.unwrapAny",function(a){if(a instanceof be)return ce(a);if(a instanceof ne)return oe(a);if(a instanceof he)return ie(a);if(a instanceof ke)return le(a);if(a instanceof Td)return Ud(a);throw Error();});
u("ng.safehtml.googSceHelper.unwrapGivenContext",function(a,b){if("html"==a)return oe(b);if("resourceUrl"==a||"templateUrl"==a)return ce(b);if("url"==a)return b instanceof be?ce(b):ie(b);if("css"==a)return le(b);if("js"==a)return Ud(b);throw Error();});
